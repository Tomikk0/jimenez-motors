<link rel="icon" href="/favicon.ico" />
<!DOCTYPE html>
<html>
<head>
  
  <base target="_top">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="header-with-image">
  <div class="header-content">
    <div class="header-logo-container">
      <img src="https://i.imgur.com/wEi6GRD.png" alt="Jimenez Motors Logo" class="header-image">
      <div class="header-text">
        <div class="logo-main">JIMENEZ MOTORS INC.</div>
        <div class="logo-subtitle">AUTÃ“KERESKEDÃ‰S Ã‰S VONTATÃS</div>

      </div>
    </div>

  <!-- AUTÃ“K OLDAL -->
  <div id="autokPage" class="page active">
    <nav class="main-nav">
      <button class="nav-btn active" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
      <button class="nav-btn" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
      <button class="nav-btn" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
            <button class="nav-btn" onclick="showPage('autokKepek')">ğŸ–¼ï¸ AutÃ³ Ã¡rak</button>
        <button class="nav-btn" onclick="showPage('tuningok')">ğŸ”§ Tuningok</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">
    ğŸ” JelszÃ³
  </button>
      <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <div id="message" class="message"></div>
    

    <!-- Csak bejelentkezÃ©s utÃ¡n -->
    <div id="adminFunctions" style="display: none;">
      <div class="modern-form-card">
        <div class="modern-form-header">
          <h3>ğŸš— Ãšj autÃ³ hozzÃ¡adÃ¡sa</h3>
        </div>

        <div class="modern-form-row">
          <div class="modern-form-group">
            <label for="modelSearch">ğŸ” Modell</label>
            <div class="model-search-container modern">
              <input type="text" id="modelSearch" class="modern-input" placeholder="KeresÃ©s modellek kÃ¶zÃ¶tt..." 
                     onfocus="showModelDropdown()" oninput="filterModels()">
              <div id="modelDropdown" class="model-dropdown modern"></div>
            </div>
          </div>

          <div class="modern-form-group">
            <label for="vetel">ğŸ’° VÃ©teliÃ¡r</label>
            <div class="modern-input-container price">
              <input type="text" id="vetel" class="modern-input" placeholder="0" 
                     oninput="formatInputPrice(this)">
            </div>
          </div>

          <div class="modern-form-group">
            <label for="kivant">ğŸ¯ KÃ­vÃ¡nt Ã¡r</label>
            <div class="modern-input-container price">
              <input type="text" id="kivant" class="modern-input" placeholder="0" 
                     oninput="formatInputPrice(this)">
            </div>
          </div>

          <div class="modern-form-group">
            <label for="eladas">ğŸ’µ EladÃ¡si Ã¡r</label>
            <div class="modern-input-container price">
              <input type="text" id="eladas" class="modern-input" placeholder="0" 
                     oninput="formatInputPrice(this)">
            </div>
          </div>
        </div>

        <!-- Modern kÃ©p feltÃ¶ltÃ©s -->
        <div class="modern-image-section">
          <h4>ğŸ“· AutÃ³ kÃ©pe</h4>
          <div class="modern-image-upload-container">
            <input type="file" id="carImage" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
            <button type="button" onclick="document.getElementById('carImage').click()" class="modern-image-upload-btn">
              ğŸ“ KÃ©p kivÃ¡lasztÃ¡sa
            </button>
            <span id="imageFileName" class="modern-image-file-name">Nincs kÃ©p kivÃ¡lasztva</span>
          </div>
          <div id="imagePreview" class="modern-image-preview"></div>
        </div>

        <!-- Modern tuning rÃ©sz -->
        <div class="modern-form-group">
          <label>ğŸ”§ Tuning opciÃ³k</label>
          <div id="tuningContainer" class="modern-tuning-container">BetÃ¶ltÃ©s...</div>
        </div>
        <!-- Modern gombok -->
        <div class="modern-form-actions">
          <button onclick="addCar()" class="modern-btn-primary">â• AutÃ³ hozzÃ¡adÃ¡sa</button>
          <button onclick="loadCars()" class="modern-btn-secondary">ğŸ”„ FrissÃ­tÃ©s</button>
        </div>
      </div>
    </div>

    <div class="modern-table-container">
      <table class="modern-table">
          <thead>
    <tr>
      <th>ğŸ“· KÃ©p</th>
      <th>ğŸš— Modell</th>
      <th>ğŸ”§ Tuning</th>
      <th id="vetelHeader" style="display: none;">ğŸ’° VÃ©telÃ¡r</th>
      <th id="kivantHeader" style="display: none;">ğŸ¯ KÃ­vÃ¡nt Ã¡r</th>
      <th>ğŸ’µ EladÃ¡si Ã¡r</th>
      <th id="keszpenzHeader">ğŸ’³ KÃ©szpÃ©nz Ã¡r</th>
      <th>ğŸ‘¤ HozzÃ¡adta</th>
      <th>ğŸ“Š StÃ¡tusz</th>
      <th id="actionHeader" style="display: none;">âš¡ MÅ±velet</th>
    </tr>
  </thead>
        <tbody id="carTableBody">
          <tr>
            <td colspan="10" class="table-loading">AutÃ³k betÃ¶ltÃ©se</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- TAGOK OLDAL -->
<div id="tagokPage" class="page">
    <nav class="main-nav">
        <button class="nav-btn" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
        <button class="nav-btn active" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
        <button class="nav-btn" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
              <button class="nav-btn" onclick="showPage('autokKepek')">ğŸ–¼ï¸ AutÃ³ Ã¡rak</button>
        <button class="nav-btn" onclick="showPage('tuningok')">ğŸ”§ Tuningok</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">
    ğŸ” JelszÃ³
  </button>
        <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <div class="form-header-with-filters">
        <div class="form-title">
        </div>
        <div class="compact-filters-row">
            <!-- NaplÃ³ ikon - CSAK ADMINOKNAK -->
        <button id="historyButton" class="modern-btn-secondary" onclick="showKickedMembersHistory()">
            ğŸ“‹ Tag tÃ¶rtÃ©net
        </button>
        
        <!-- KITÅ°ZÅ GOMB - CSAK ADMINOKNAK -->
        <button id="badgeButton" class="modern-btn-secondary" onclick="openBadgeModal()">
            â­ KitÅ±zÅ‘k
        </button>
        </div>
    </div>

    <div id="tagMessage" class="message"></div>

    <!-- KirÃºgÃ¡si modal - CSAK ADMINOKNAK -->
    <div id="kickModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
            <div class="edit-modal-header">
                <h3>ğŸš« Tag kirÃºgÃ¡sa</h3>
                <span class="edit-close" onclick="closeKickModal()">&times;</span>
            </div>
            
            <div class="edit-modal-body">
                <div class="member-info-card">
                    <h4 id="kickMemberName"></h4>
                    <p style="color: #718096; margin: 10px 0;">Biztosan ki szeretnÃ©d rÃºgni ezt a tagot?</p>
                </div>

                <div class="sale-form">
                    <div class="form-group">
                        <label for="kickReason">ğŸ“ IndoklÃ¡s</label>
                        <textarea id="kickReason" class="modern-input" placeholder="Add meg a kirÃºgÃ¡s indokÃ¡t..." 
                                 style="width: 100%; min-height: 100px; padding: 12px; resize: vertical;"></textarea>
                    </div>
                </div>
            </div>

            <div class="edit-modal-footer">
                <button class="btn-cancel" onclick="closeKickModal()">âŒ MÃ©gse</button>
                <button class="btn-confirm-sale" onclick="confirmKick()">âœ… KirÃºgÃ¡s megerÅ‘sÃ­tÃ©se</button>
            </div>
        </div>
    </div>

    <!-- Tag tÃ¶rtÃ©net naplÃ³ modal - CSAK ADMINOKNAK -->
    <div id="kickedMembersModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content" style="max-width: 900px; max-height: 90vh;">
            <div class="edit-modal-header">
                <h3>ğŸ“‹ Tag tÃ¶rtÃ©net naplÃ³</h3>
                <span class="edit-close" onclick="closeKickedMembersModal()">&times;</span>
            </div>
            
            <div class="edit-modal-body" style="max-height: 70vh; overflow-y: auto; padding: 30px;">
                <div id="kickedMembersList" class="history-container">
                    <div class="table-loading">NaplÃ³ betÃ¶ltÃ©se...</div>
                </div>
            </div>

            <div class="edit-modal-footer">
                <button class="btn-cancel" onclick="closeKickedMembersModal()">âŒ BezÃ¡rÃ¡s</button>
            </div>
        </div>
    </div>

    <!-- KITÅ°ZÅ MODAL - CSAK ADMINOKNAK -->
    <div id="badgeModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content" style="max-width: 900px; max-height: 90vh;">
            <div class="edit-modal-header">
                <h3>â­ KitÅ±zÅ‘k - Rang MegjegyzÃ©sek</h3>
                <span class="edit-close" onclick="closeBadgeModal()">&times;</span>
            </div>
            
            <div class="edit-modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div id="badgeMessage" class="message"></div>

                <!-- Ãšj megjegyzÃ©s hozzÃ¡adÃ¡sa - CSAK ADMIN -->
                <div class="badge-add-form">
                    <h4>â• Ãšj megjegyzÃ©s hozzÃ¡adÃ¡sa</h4>
                    <div class="modern-form-row">
                        <div class="modern-form-group">
                            <label for="badgeRankSelect">ğŸ¯ Rang kivÃ¡lasztÃ¡sa</label>
                            <select id="badgeRankSelect" class="modern-input">
                                <option value="">VÃ¡lassz rangot...</option>
                                <option value="Owner">ğŸ‘‘ Owner</option>
                                <option value="Co-Owner">ğŸ’ Co-Owner</option>
                                <option value="Manager">ğŸ’¼ Manager</option>
                                <option value="Team Leader">â­ Team Leader</option>
                                <option value="Top Salesman">ğŸš€ Top Salesman</option>
                                <option value="Sr. Salesman">ğŸ”¶ Sr. Salesman</option>
                                <option value="Jr. Salesman">ğŸ”¹ Jr. Salesman</option>
                                <option value="Towing Specialist">ğŸ”§ Towing Specialist</option>
                                <option value="Tow Operator">âš¡ Tow Operator</option>
                                <option value="Truck Driver">ğŸš› Truck Driver</option>
                                <option value="Member">ğŸ‘¤ Member</option>
                            </select>
                        </div>
                        
                        <div class="modern-form-group">
                            <label for="badgeNote">ğŸ“ MegjegyzÃ©s</label>
                            <textarea id="badgeNote" class="modern-input" 
                                     placeholder="Ãrj megjegyzÃ©st ehhez a ranghoz..." 
                                     style="min-height: 80px; resize: vertical;"></textarea>
                        </div>
                    </div>
                    
                    <div class="modern-form-actions">
                        <button onclick="addBadgeNote()" class="modern-btn-primary">
                            ğŸ’¾ MegjegyzÃ©s mentÃ©se
                        </button>
                        <button onclick="refreshBadges()" class="modern-btn-secondary">
                            ğŸ”„ FrissÃ­tÃ©s
                        </button>
                    </div>
                </div>

                <!-- KitÅ±zÅ‘k listÃ¡ja -->
                <div class="badge-container" id="badgeContainer">
                    <div class="table-loading">KitÅ±zÅ‘k betÃ¶ltÃ©se...</div>
                </div>
            </div>

            <div class="edit-modal-footer">
                <button class="btn-cancel" onclick="closeBadgeModal()">âŒ BezÃ¡rÃ¡s</button>
            </div>
        </div>
    </div>
    
    <div class="modern-table-container">
          <!-- Csak bejelentkezÃ©s utÃ¡n -->
           
<div id="tagAdminFunctions" style="display: none;">
    <div class="compact-add-tag">
        <input type="text" id="newTag" placeholder="Ãšj tag neve">
        <button onclick="addTag()">â• HozzÃ¡adÃ¡s</button>
    </div>
</div>
        <table class="modern-table modern-tags-table" id="tagsTable">
            <thead>
                <tr>
                    <th>NÃ©v</th>
                    <th>Rang</th>
                    <th id="tagActionHeader" style="display: none;">MÅ±velet</th>
                </tr>
            </thead>
            <tbody id="tagsTableBody">
                <tr>
                    <td colspan="3" class="table-loading">Tagok betÃ¶ltÃ©se</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- TUNINGOK OLDAL -->
<div id="tuningokPage" class="page">
    <nav class="main-nav">
        <button class="nav-btn" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
        <button class="nav-btn" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
        <button class="nav-btn" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
        <button class="nav-btn" onclick="showPage('autokKepek')">ğŸ–¼ï¸ AutÃ³ Ã¡rak</button>
        <button class="nav-btn active" onclick="showPage('tuningok')">ğŸ”§ Tuningok</button>
        <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">ğŸ” JelszÃ³</button>
        <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <div class="form-header-with-filters">
        <div class="form-title">
            <h2>ğŸ”§ Tuning Csomagok</h2>
        </div>
    </div>

    <div id="tuningMessage" class="message"></div>

    <!-- Ãšj tuning hozzÃ¡adÃ¡sa - CSAK BEJELENTKEZÃ‰S UTÃN -->
    <div id="tuningAdminFunctions" style="display: none;">
        <div class="modern-form-card">
            <div class="modern-form-header">
                <h3>â• Ãšj tuning csomag hozzÃ¡adÃ¡sa</h3>
            </div>

            <div class="modern-form-row">
                <div class="modern-form-group">
                    <label for="tuningName">ğŸ”§ Tuning nÃ©v</label>
                    <input type="text" id="tuningName" class="modern-input" placeholder="Pl.: Teljes motor tuning">
                </div>

                <div class="modern-form-group">
                    <label for="tuningPrice">ğŸ’° Ãr ($)</label>
                    <div class="modern-input-container price">
                        <input type="text" id="tuningPrice" class="modern-input" placeholder="0" 
                               oninput="formatInputPrice(this)">
                    </div>
                </div>

                <!-- ÃšJ: PP Ã¡r mezÅ‘ -->
                <div class="modern-form-group">
                    <label for="tuningPPPrice">ğŸ¯ Ãr (PP)</label>
                    <div class="modern-input-container">
                        <input type="text" id="tuningPPPrice" class="modern-input" placeholder="0" 
                               oninput="formatInputPrice(this)">
                    </div>
                </div>
            </div>

            <!-- Modern gombok -->
            <div class="modern-form-actions">
                <button onclick="addTuning()" class="modern-btn-primary">â• Tuning hozzÃ¡adÃ¡sa</button>
                <button onclick="loadTunings()" class="modern-btn-secondary">ğŸ”„ FrissÃ­tÃ©s</button>
            </div>
        </div>
    </div>

    <!-- Tuningok tÃ¡blÃ¡zat -->
    <div class="modern-table-container">
        <table class="modern-table">
            <thead>
                <tr>
                    <th>ğŸ”§ Tuning nÃ©v</th>
                    <th>ğŸ’° Ãr ($)</th>
                    <th>ğŸ¯ Ãr (PP)</th>
                    <th id="tuningActionHeader" style="display: none;">âš¡ MÅ±velet</th>
                </tr>
            </thead>
            <tbody id="tuningTableBody">
                <tr>
                    <td colspan="4" class="table-loading">Tuningok betÃ¶ltÃ©se...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
  <!-- STATISZTIKA OLDAL -->
  <div id="statisztikaPage" class="page">
    <nav class="main-nav">
      <button class="nav-btn" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
      <button class="nav-btn" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
      <button class="nav-btn active" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
      <button class="nav-btn" onclick="showPage('autokKepek')">ğŸ–¼ï¸ AutÃ³ Ã¡rak</button>
      <button class="nav-btn" onclick="showPage('tuningok')">ğŸ”§ Tuningok</button>
        <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">
    ğŸ” JelszÃ³
  </button>
      <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <h2>ğŸ“Š StatisztikÃ¡k</h2>
    <div class="stats-container">
      <div class="stat-card">
        <h3>Ã–sszes autÃ³</h3>
        <div id="totalCars" class="stat-number">0</div>
      </div>
      <div class="stat-card">
        <h3>Eladott autÃ³k</h3>
        <div id="soldCars" class="stat-number">0</div>
      </div>
      <div class="stat-card">
        <h3>Ã–sszes profit</h3>
        <div id="totalProfit" class="stat-number">$</div>
      </div>
      <div class="stat-card">
        <h3>LegnÃ©pszerÅ±bb modell</h3>
        <div id="popularModel" class="stat-number">-</div>
      </div>
      <div class="stat-card">
        <h3>Ã–sszes tag</h3>
        <div id="totalTags" class="stat-number">0</div>
      </div>
    </div>
  </div>

  <!-- AutÃ³ Ã¡rak OLDAL -->
<div id="autokKepekPage" class="page">
    <nav class="main-nav">
        <button class="nav-btn" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
        <button class="nav-btn" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
        <button class="nav-btn" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
        <button class="nav-btn active" onclick="showPage('autokKepek')">ğŸ–¼ï¸ AutÃ³ Ã¡rak</button>
        <button class="nav-btn" onclick="showPage('tuningok')">ğŸ”§ Tuningok</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">
    ğŸ” JelszÃ³
  </button>
        <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <div class="form-header-with-filters">
        <div class="form-title">
        </div>
    </div>

    <div id="galleryMessage" class="message"></div>

    <!-- AutÃ³ hozzÃ¡adÃ¡sa - CSAK BEJELENTKEZÃ‰S UTÃN -->
    <div id="galleryAdminFunctions" style="display: none;">
        <div class="modern-form-card">
            <div class="modern-form-header">
                <h3>â• Ãšj autÃ³ hozzÃ¡adÃ¡sa a listÃ¡hoz</h3>
            </div>
<!-- MODELL KERESÅ RÃ‰SZ - CSAK GALÃ‰RIA -->
                <div class="modern-form-group">
                    <label for="galleryModelSearch">ğŸš— Modell</label>
                    <div class="model-search-container modern">
                        <input type="text" id="galleryModelSearch" class="modern-input" placeholder="KeresÃ©s modellek kÃ¶zÃ¶tt..." 
                              onfocus="showGalleryModelDropdown()" oninput="filterGalleryModels()">
                        <div id="galleryModelDropdown" class="model-dropdown modern"></div>
                    </div>

                <div class="modern-form-group">
                    <label for="galleryPrice">ğŸ’° Ãr</label>
                    <div class="modern-input-container price">
                        <input type="text" id="galleryPrice" class="modern-input" placeholder="0" 
                               oninput="formatInputPrice(this)">
                    </div>
                </div>
            </div>

            <!-- Modern kÃ©p feltÃ¶ltÃ©s -->
            <div class="modern-image-section">
                <h4>ğŸ“· AutÃ³ kÃ©pe</h4>
                <div class="modern-image-upload-container">
                    <input type="file" id="galleryCarImage" accept="image/*" style="display: none;" onchange="handleGalleryImageSelect(event)">
                    <button type="button" onclick="document.getElementById('galleryCarImage').click()" class="modern-image-upload-btn">
                        ğŸ“ KÃ©p kivÃ¡lasztÃ¡sa
                    </button>
                    <span id="galleryImageFileName" class="modern-image-file-name">Nincs kÃ©p kivÃ¡lasztva</span>
                </div>
                <div id="galleryImagePreview" class="modern-image-preview"></div>
            </div>

            <!-- Modern gombok -->
            <div class="modern-form-actions">
                <button onclick="addGalleryCar()" class="modern-btn-primary">â• AutÃ³ hozzÃ¡adÃ¡sa</button>
            </div>
        </div>
    </div>

    <!-- AutÃ³ Ã¡rak tÃ¡blÃ¡zat -->
    <div class="modern-table-container">
        <table class="modern-table">
            <thead>
                <tr>
                    <th>ğŸ“· KÃ©p</th>
                    <th>ğŸš— Modell</th>
                    <th>ğŸ’° Ãr</th>
                    <th id="galleryActionHeader" style="display: none;">âš¡ MÅ±velet</th>
                </tr>
            </thead>
            <tbody id="galleryTableBody">
                <tr>
                    <td colspan="4" class="table-loading">AutÃ³ Ã¡rak betÃ¶ltÃ©se...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- MODIFIKÃLT RESZ - JelszÃ³vÃ¡ltoztatÃ¡s gomb a navigÃ¡ciÃ³ban -->
<div id="loginPage" class="page">
  <div class="modern-login-card">
    <div class="modern-login-header">
      <h3>ğŸ” BejelentkezÃ©s</h3>
      <p>SzerkesztÃ©shez jelentkezzen be!</p>
    </div>

    <div class="modern-login-form" id="loginForm">
      <div class="modern-form-group">
        <label for="username">ğŸ‘¤ FelhasznÃ¡lÃ³nÃ©v</label>
        <input type="text" id="username" placeholder="Ãrja be a felhasznÃ¡lÃ³nevÃ©t" 
               class="modern-login-input" autocomplete="username">
      </div>

      <div class="modern-form-group">
        <label for="password">ğŸ”’ JelszÃ³</label>
        <input type="password" id="password" placeholder="Ãrja be a jelszavÃ¡t" 
               class="modern-login-input" autocomplete="current-password">
      </div>

      <button type="button" onclick="handleLogin()" class="modern-login-btn" id="loginButton">
        ğŸšª BejelentkezÃ©s
      </button>
    </div>

    <div class="modern-login-footer">
      <button onclick="showPage('autok')" class="modern-back-btn">
        â¬…ï¸ Vissza a bÃ¶ngÃ©szÃ©shez
      </button>
      <!-- ELTÃVOLÃTVA: a jelszÃ³vÃ¡ltoztatÃ¡s gomb innen -->
      <div id="loginMessage" class="message" style="margin-top: 20px;"></div>
    </div>
  </div>
</div>
<!-- JelszÃ³vÃ¡ltoztatÃ¡s Modal -->
<div id="changePasswordModal" class="edit-modal" style="display: none;">
    <div class="edit-modal-content" style="max-width: 500px;">
        <div class="edit-modal-header">
            <h3>ğŸ” JelszÃ³ megvÃ¡ltoztatÃ¡sa</h3>
            <span class="edit-close" onclick="closeChangePasswordModal()">&times;</span>
        </div>
        
        <div class="edit-modal-body">
            <div id="changePasswordMessage" class="message"></div>
            
            <div class="sale-form">
                <div class="form-group">
                    <label for="currentPassword">ğŸ”’ Jelenlegi jelszÃ³</label>
                    <input type="password" id="currentPassword" class="modern-input" 
                           placeholder="Add meg a jelenlegi jelszavad" autocomplete="current-password">
                </div>

                <div class="form-group">
                    <label for="newPassword">ğŸ†• Ãšj jelszÃ³</label>
                    <input type="password" id="newPassword" class="modern-input" 
                           placeholder="Add meg az Ãºj jelszÃ³t" autocomplete="new-password">
                </div>

                <div class="form-group">
                    <label for="confirmPassword">âœ… Ãšj jelszÃ³ megerÅ‘sÃ­tÃ©se</label>
                    <input type="password" id="confirmPassword" class="modern-input" 
                           placeholder="Add meg Ãºjra az Ãºj jelszÃ³t" autocomplete="new-password">
                </div>
            </div>
        </div>

        <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeChangePasswordModal()">âŒ MÃ©gse</button>
            <button class="btn-confirm-sale" onclick="changePassword()">ğŸ’¾ JelszÃ³ megvÃ¡ltoztatÃ¡sa</button>
        </div>
    </div>
</div>
  <!-- Modern EladÃ¡s Modal -->
  <div id="editSaleModal" class="edit-modal" style="display: none;">
    <div class="edit-modal-content">
      <div class="edit-modal-header">
        <h3>ğŸš— AutÃ³ eladÃ¡sa</h3>
        <span class="edit-close" onclick="closeEditModal()">&times;</span>
      </div>
      
      <div class="edit-modal-body">
        <div class="car-info-card">
          <div class="car-image-preview">
            <img id="editCarImage" src="" alt="AutÃ³ kÃ©p">
          </div>
          <div class="car-details">
            <h4 id="editCarModel"></h4>
            <div class="price-info-grid">
              <div class="price-item">
                <span class="price-label">VÃ©teliÃ¡r:</span>
                <span id="editPurchasePrice" class="price-value"></span>
              </div>
              <div class="price-item">
                <span class="price-label">Jelenlegi Ã¡r:</span>
                <span id="editCurrentPrice" class="price-value"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="sale-form">
          <div class="form-group">
            <label for="editSalePrice">ğŸ’µ Ãšj eladÃ¡si Ã¡r</label>
            <div class="price-input-container">
              <input type="text" id="editSalePrice" placeholder="0" maxlength="15">
            </div>
            <div class="price-hint">Ãrd be az Ã¡rat, automatikusan formÃ¡zÃ³dik</div>
          </div>

          <div class="profit-calc" id="profitCalc">
            <div class="profit-header">ğŸ“Š Profit szÃ¡mÃ­tÃ¡s</div>
            <div class="profit-row">
              <span>VÃ©teliÃ¡r:</span>
              <span id="calcPurchase">0 $</span>
            </div>
            <div class="profit-row">
              <span>EladÃ¡si Ã¡r:</span>
              <span id="calcSale">0 $</span>
            </div>
            <div class="profit-row total">
              <span>EredmÃ©ny:</span>
              <span id="calcProfit">0 $</span>
            </div>
          </div>
        </div>
      </div>

      <div class="edit-modal-footer">
        <button class="btn-cancel" onclick="closeEditModal()">âŒ MÃ©gse</button>
        <button class="btn-confirm-sale" onclick="confirmSaleWithEdit()">âœ… AutÃ³ eladva</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>