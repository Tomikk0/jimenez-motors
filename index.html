<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="header">
    <div class="logo">JIMENEZ<br>MOTORS INC.</div>
    <div class="logo-subtitle">AUTÃ“KERESKEDÃ‰S Ã‰S VONTATÃS</div>
    <div class="logo-years"><strong>A 2020</strong> â€¢ <strong>B 1999</strong> â€¢ <strong>C 1986</strong></div>
  </div>

  <!-- AUTÃ“K OLDAL -->
  <div id="autokPage" class="page active">
    <nav class="main-nav">
      <button class="nav-btn active" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
      <button class="nav-btn" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
      <button class="nav-btn" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
      <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <h2>ğŸš— AutÃ³ adatbÃ¡zis</h2>
    <div id="message" class="message"></div>

    <!-- Csak bejelentkezÃ©s utÃ¡n -->
    <div id="adminFunctions" style="display: none;">
      <div class="form-card">
        <h3>â• Ãšj autÃ³ hozzÃ¡adÃ¡sa</h3>
        <div class="form-row-combined">
          <div class="form-column">
            <div class="model-search-container">
              <input type="text" id="modelSearch" class="model-search-input" placeholder="ğŸ” Modellek..." onfocus="showModelDropdown()" oninput="filterModels()">
              <div id="modelDropdown" class="model-dropdown"></div>
            </div>
          </div>
          <div class="form-column">
            <input id="vetel" placeholder="VÃ©tel Ãr ($)" type="text" oninput="formatInputPrice(this)">
          </div>
          <div class="form-column">
            <input id="kivant" placeholder="KÃ­vÃ¡nt Ãr ($)" type="text" oninput="formatInputPrice(this)">
          </div>
          <div class="form-column">
            <input id="eladas" placeholder="EladÃ¡si Ãr ($)" type="text" oninput="formatInputPrice(this)">
          </div>
        </div>
        
        <!-- KÃ‰P FELTÃ–LTÃ‰S -->
        <div class="image-upload-section">
          <h4>ğŸ“· AutÃ³ kÃ©pe:</h4>
          <div class="image-upload-container">
            <input type="file" id="carImage" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
            <button type="button" onclick="document.getElementById('carImage').click()" class="image-upload-btn">
              ğŸ“ KÃ©p kivÃ¡lasztÃ¡sa
            </button>
            <span id="imageFileName" class="image-file-name">Nincs kÃ©p kivÃ¡lasztva</span>
          </div>
          <div id="imagePreview" class="image-preview"></div>
        </div>

        <h4 style="margin-top:15px;">Tuning:</h4>
        <div id="tuningContainer" class="tuning-container">BetÃ¶ltÃ©s...</div>
        
        <button onclick="addCar()">â• AutÃ³ hozzÃ¡adÃ¡sa</button>
        <button onclick="loadCars()">ğŸ”„ FrissÃ­tÃ©s</button>
      </div>
    </div>

    <table id="cars">
      <thead>
        <tr>
          <th>KÃ©p</th>
          <th>Model</th>
          <th>Tuning</th>
          <th>VÃ©tel Ãr</th>
          <th id="kivantHeader" style="display: none;">KÃ­vÃ¡nt Ãr</th>
          <th>EladÃ¡si Ãr</th>
          <th>HozzÃ¡adta</th>
          <th id="statusHeader" style="display: none;">StÃ¡tusz</th>
          <th id="actionHeader" style="display: none;">MÅ±velet</th>
        </tr>
      </thead>
      <tbody id="carTableBody">
        <tr><td colspan="9">BetÃ¶ltÃ©s...</td></tr>
      </tbody>
    </table>
  </div>

  <!-- TAGOK OLDAL -->
  <div id="tagokPage" class="page">
    <nav class="main-nav">
      <button class="nav-btn" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
      <button class="nav-btn active" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
      <button class="nav-btn" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
      <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <h2>ğŸ‘¥ Tagok</h2>
    <div id="tagMessage" class="message"></div>

    <!-- Csak bejelentkezÃ©s utÃ¡n -->
    <div id="tagAdminFunctions" style="display: none;">
      <div class="form-card">
        <h3>â• Ãšj tag hozzÃ¡adÃ¡sa</h3>
        <input type="text" id="newTag" placeholder="Ãšj tag neve">
        <button onclick="addTag()">â• Tag hozzÃ¡adÃ¡sa</button>
      </div>
    </div>

    <table id="tagsTable">
      <thead>
        <tr>
          <th>NÃ©v</th>
          <th>Rang</th>
          <th id="tagActionHeader" style="display: none;">MÅ±velet</th>
        </tr>
      </thead>
      <tbody id="tagsTableBody">
        <tr><td colspan="3">BetÃ¶ltÃ©s...</td></tr>
      </tbody>
    </table>
  </div>

  <!-- STATISZTIKA OLDAL -->
  <div id="statisztikaPage" class="page">
    <nav class="main-nav">
      <button class="nav-btn" onclick="showPage('autok')">ğŸš— AutÃ³k</button>
      <button class="nav-btn" onclick="showPage('tagok')">ğŸ‘¥ Tagok</button>
      <button class="nav-btn active" onclick="showPage('statisztika')">ğŸ“Š Statisztika</button>
      <button class="nav-btn login-btn" onclick="showPage('login')">ğŸ” BejelentkezÃ©s</button>
    </nav>

    <h2>ğŸ“Š StatisztikÃ¡k</h2>
    <div class="stats-container">
      <div class="stat-card">
        <h3>Ã–sszes autÃ³</h3>
        <div id="totalCars" class="stat-number">0</div>
      </div>
      <div class="stat-card">
        <h3>Eladott autÃ³k</h3>
        <div id="soldCars" class="stat-number">0</div>
      </div>
      <div class="stat-card">
        <h3>Ã–sszes profit</h3>
        <div id="totalProfit" class="stat-number">$</div>
      </div>
      <div class="stat-card">
        <h3>LegnÃ©pszerÅ±bb modell</h3>
        <div id="popularModel" class="stat-number">-</div>
      </div>
      <div class="stat-card">
        <h3>Ã–sszes tag</h3>
        <div id="totalTags" class="stat-number">0</div>
      </div>
    </div>
  </div>

  <!-- BEJELENTKEZÃ‰S OLDAL -->
  <div id="loginPage" class="page">
    <div class="login-card">
      <h3>ğŸ” BejelentkezÃ©s</h3>
      <p>SzerkesztÃ©shez jelentkezzen be!</p>
      <input type="text" id="username" placeholder="FelhasznÃ¡lÃ³nÃ©v" class="login-input">
      <input type="password" id="password" placeholder="JelszÃ³" class="login-input">
      <button onclick="login()">ğŸšª BejelentkezÃ©s</button>
      <button onclick="showPage('autok')" class="back-btn">â¬…ï¸ Vissza a bÃ¶ngÃ©szÃ©shez</button>
      <div id="loginMessage" class="message"></div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
