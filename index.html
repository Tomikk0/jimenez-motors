<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jimenez Motors Admin</title>
  <base target="_top">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/pages.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/halloween.css">
  <link rel="stylesheet" href="css/modern.css">
  <link rel="stylesheet" href="css/dark-theme.css">
  <link rel="stylesheet" href="css/obsidian.css">
</head>
<body class="modern-theme">
  <main id="siteMain" class="site-main">
    <header class="header-with-image dashboard-hero">
      <div class="header-content">
        <div class="header-logo-container">
          <img src="https://i.imgur.com/wEi6GRD.png" alt="Jimenez Motors Logo" class="header-image">
          <div class="header-text">
            <div class="logo-main">JIMENEZ MOTORS</div>
            <div class="logo-subtitle">AktuÃ¡lis hÃ­rek & kÃ©szlet</div>
          </div>
        </div>
      </div>
    </header>

    <!-- AUTÃ“K OLDAL -->
    <div id="autokPage" class="page active">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn active" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">JelszÃ³</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <section class="news-section glass-card">
            <div class="section-heading">
              <p class="eyebrow">Jimenez Motors</p>
              <h2>AktuÃ¡lis hÃ­rek</h2>
            </div>
            <div class="news-grid">
              <article class="news-card">
                <h3>Ãšj tuningcsomagok</h3>
                <p>Stage 3 csomag mÃ©g tÃ¶bb lÃ³erÅ‘t hoz â€“ mostantÃ³l elÃ©rhetÅ‘ a garÃ¡zsban.</p>
                <span class="news-date">2025.10.20</span>
              </article>
              <article class="news-card">
                <h3>Åszi akciÃ³</h3>
                <p>Az Å‘szi kÃ©szlet 10% kedvezmÃ©nnyel Ã©rkezik. Foglalj idÅ‘pontot tesztvezetÃ©sre!</p>
                <span class="news-date">2025.10.26</span>
              </article>
              <article class="news-card">
                <h3>Ãšj modellek Ã©rkeztek</h3>
                <p>A legfrissebb eurÃ³pai importok mÃ¡r megtekinthetÅ‘k a bemutatÃ³teremben.</p>
                <span class="news-date">2025.09.29</span>
              </article>
            </div>
          </section>

          <section class="cars-section glass-card">
            <div class="section-heading">
              <h2>EladÃ³ autÃ³k</h2>
              <span class="section-hint">HÃºzd jobbra/balra</span>
            </div>

            <div id="message" class="message"></div>

            <div class="car-carousel">
              <div id="carCardTrack" class="car-card-track">
                <div class="car-card placeholder-card">
                  <p>AutÃ³k betÃ¶ltÃ©se...</p>
                </div>
              </div>
            </div>
          </section>

          <section class="upload-section glass-card">
            <div class="section-heading">
              <h2>Ãšj autÃ³ feltÃ¶ltÃ©se</h2>
              <p>Årizd meg a kÃ©szlet naprakÃ©szsÃ©gÃ©t egy kattintÃ¡ssal.</p>
            </div>
            <div id="adminFunctions" class="admin-actions" style="display: none;">
              <button type="button" class="accent-btn" onclick="openCarUploadModal()">FeltÃ¶ltÃ©s</button>
              <button type="button" class="ghost-btn" onclick="loadCars()">Lista frissÃ­tÃ©se</button>
            </div>
            <div class="upload-cta" id="uploadCtaFallback">
              <p>Jelentkezz be, hogy Ãºj autÃ³t rÃ¶gzÃ­thess.</p>
            </div>
          </section>
        </div>
      </section>
    </div>

    <!-- AUTÃ“ FELTÃ–LTÃ‰S MODAL -->
    <div id="carUploadModal" class="neo-modal" aria-hidden="true">
      <div class="neo-modal__backdrop" onclick="closeCarUploadModal()"></div>
      <div class="neo-modal__dialog" role="dialog" aria-modal="true">
        <button type="button" class="neo-modal__close" onclick="closeCarUploadModal()" aria-label="BezÃ¡rÃ¡s">&times;</button>
        <div class="modern-form-card neo-modal__content">
          <div class="modern-form-header">
            <p class="modal-kicker">Ãšj autÃ³ feltÃ¶ltÃ©se</p>
            <h3>ğŸš— TÃ¶ltsd fel a friss kÃ©szletet</h3>
            <p class="modal-subtitle">Minden mezÅ‘ kitÃ¶ltÃ©se segÃ­t a csapatnak naprakÃ©sz maradni.</p>
          </div>

          <div class="modern-form-row">
            <div class="modern-form-group">
              <label for="modelSearch">ğŸ” Modell</label>
              <div class="model-search-container modern">
                <input type="text" id="modelSearch" class="modern-input" placeholder="KeresÃ©s modellek kÃ¶zÃ¶tt..."
                       onfocus="showModelDropdown()" oninput="filterModels()">
                <div id="modelDropdown" class="model-dropdown modern"></div>
              </div>
            </div>

            <div class="modern-form-group">
              <label for="vetel">ğŸ’° VÃ©teli Ã¡r</label>
              <div class="modern-input-container price">
                <input type="text" id="vetel" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
              </div>
            </div>

            <div class="modern-form-group">
              <label for="kivant">ğŸ¯ KÃ­vÃ¡nt minimum Ã¡r</label>
              <div class="modern-input-container price">
                <input type="text" id="kivant" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
              </div>
            </div>

            <div class="modern-form-group">
              <label for="eladas">ğŸ’µ EladÃ¡si Ã¡r</label>
              <div class="modern-input-container price">
                <input type="text" id="eladas" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
              </div>
            </div>
          </div>

          <div class="modern-image-section">
            <h4>ğŸ“· AutÃ³ kÃ©pe</h4>
            <div class="modern-image-upload-container">
              <input type="file" id="carImage" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
              <button type="button" onclick="document.getElementById('carImage').click()" class="modern-image-upload-btn">
                ğŸ“ KÃ©p kivÃ¡lasztÃ¡sa
              </button>
              <span id="imageFileName" class="modern-image-file-name">Nincs kÃ©p kivÃ¡lasztva</span>
            </div>
            <div id="imagePreview" class="modern-image-preview"></div>
          </div>

          <div class="modern-form-group">
            <label>ğŸ”§ Tuning opciÃ³k</label>
            <div id="tuningContainer" class="modern-tuning-container">BetÃ¶ltÃ©s...</div>
          </div>

          <div class="modern-form-actions">
            <button onclick="addCar()" class="modern-btn-primary">FeltÃ¶ltÃ©s</button>
            <button type="button" class="modern-btn-secondary" onclick="closeCarUploadModal()">MÃ©gse</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ELADOTT AUTÃ“K OLDAL -->
    <div id="eladottAutokPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn active" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">JelszÃ³</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>âœ… Eladott AutÃ³k</h3>
            </div>

            <div id="soldCarsMessage" class="message"></div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>ğŸ“· KÃ©p</th>
                    <th>ğŸš— Modell</th>
                    <th>ğŸ”§ Tuning</th>
                    <th>ğŸ’° VÃ©telÃ¡r</th>
                    <th>ğŸ’µ EladÃ¡si Ã¡r</th>
                    <th>ğŸ“ˆ Profit</th>
                    <th>ğŸ‘¤ Eladta</th>
                    <th>ğŸ“… EladÃ¡s dÃ¡tuma</th>
                  </tr>
                </thead>
                <tbody id="soldCarsTableBody">
                  <tr>
                    <td colspan="8" class="table-loading">Eladott autÃ³k betÃ¶ltÃ©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>
    </div>

    <!-- TAGOK OLDAL -->
    <div id="tagokPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn active" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">JelszÃ³</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>ğŸ‘¥ Tagok</h3>
              <p>Jimenez Motors csapattagjai</p>
            </div>

            <div class="form-header-with-filters">
              <div class="form-title"></div>
              <div id="tagAdminFunctions" class="compact-filters-row">
                <button id="historyButton" class="modern-btn-secondary" onclick="showKickedMembersHistory()">ğŸ“‹ Tag tÃ¶rtÃ©net</button>
                <button id="badgeButton" class="modern-btn-secondary" onclick="openBadgeModal()">â­ KitÅ±zÅ‘k</button>
                <button id="tagAdminButton" class="modern-btn-secondary" onclick="openTagAdminModal()">ğŸ‘‘ Tag Admin</button>
              </div>
            </div>

            <div id="tagMessage" class="message"></div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>ğŸ‘¤ NÃ©v</th>
                    <th>â­ Rang</th>
                    <th>ğŸ“… FelvÃ©tel dÃ¡tuma</th>
                    <th id="tagActionHeader" style="display: none;">âš™ï¸ MÅ±veletek</th>
                  </tr>
                </thead>
                <tbody id="tagsTableBody">
                  <tr>
                    <td colspan="4" class="table-loading">Tagok betÃ¶ltÃ©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>

      <!-- TAG ADMIN MODAL -->
      <div id="tagAdminModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--wide">
          <div class="edit-modal-header">
            <h3>ğŸ‘‘ Tag AdminisztrÃ¡ciÃ³</h3>
            <span class="edit-close" onclick="closeTagAdminModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <div id="tagAdminMessage" class="message"></div>

            <div class="badge-add-form">
              <h4>â• Ãšj Tag HozzÃ¡adÃ¡sa</h4>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="newTagName">ğŸ‘¤ IG NÃ©v (MegjelenÃ­tett nÃ©v)</label>
                  <input type="text" id="newTagName" class="modern-input" placeholder="Ãrd be a tag IG nevÃ©t...">
                  <div class="input-hint">Ez a nÃ©v jelenik meg a tagok listÃ¡jÃ¡ban</div>
                </div>

                <div class="modern-form-group">
                  <label for="newUsername">ğŸ” FelhasznÃ¡lÃ³nÃ©v (BelÃ©pÃ©shez)</label>
                  <input type="text" id="newUsername" class="modern-input" placeholder="Ãrd be a felhasznÃ¡lÃ³nevet...">
                  <div class="input-hint">Ezzel a nÃ©vvel tud bejelentkezni</div>
                </div>

                <div class="modern-form-group">
                  <label for="newTagPhone">ğŸ“ TelefonszÃ¡m (opcionÃ¡lis)</label>
                  <input type="text" id="newTagPhone" class="modern-input" placeholder="+36...">
                </div>
              </div>

              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="newUserRole">ğŸ¯ HozzÃ¡fÃ©rÃ©si Szint</label>
                  <select id="newUserRole" class="modern-input">
                    <option value="user">ğŸ‘¤ User - Alap hozzÃ¡fÃ©rÃ©s</option>
                    <option value="admin">ğŸ‘‘ Admin - Teljes hozzÃ¡fÃ©rÃ©s</option>
                  </select>
                  <div class="input-hint">MeghatÃ¡rozza, milyen oldalak Ã©rhetÅ‘ek el</div>
                </div>

                <div class="modern-form-group">
                  <label for="newTagRank">â­ Rang MegjelenÃ­tÃ©s</label>
                  <select id="newTagRank" class="modern-input">
                    <option value="">VÃ¡lassz rangot...</option>
                    <option value="Owner">ğŸ‘‘ Owner</option>
                    <option value="Co-Owner">ğŸ’ Co-Owner</option>
                    <option value="Manager">ğŸ’¼ Manager</option>
                    <option value="Team Leader">â­ Team Leader</option>
                    <option value="Top Salesman">ğŸš€ Top Salesman</option>
                    <option value="Sr. Salesman">ğŸ”¶ Sr. Salesman</option>
                    <option value="Jr. Salesman">ğŸ”¹ Jr. Salesman</option>
                    <option value="Towing Specialist">ğŸ”§ Towing Specialist</option>
                    <option value="Tow Operator">âš¡ Tow Operator</option>
                    <option value="Truck Driver">ğŸš› Truck Driver</option>
                    <option value="Member">ğŸ‘¤ Member</option>
                  </select>
                  <div class="input-hint">Ez jelenik meg a nÃ©v mellett</div>
                </div>
              </div>

              <div class="modern-form-row">
                <div class="modern-form-group full-width">
                  <label for="customPassword">ğŸ” JelszÃ³</label>
                  <input type="password" id="customPassword" class="modern-input" placeholder="Ãrd be a jelszÃ³t...">
                  <div class="input-hint">A tag ezzel a jelszÃ³val tud bejelentkezni (minimum 4 karakter)</div>
                </div>
              </div>

              <div class="modern-form-actions">
                <button onclick="addTagWithAccount()" class="modern-btn-primary">ğŸ’¾ Tag hozzÃ¡adÃ¡sa</button>
                <button onclick="clearTagAdminForm()" class="modern-btn-secondary">ğŸ—‘ï¸ Å°rlap tÃ¶rlÃ©se</button>
                <button onclick="forceRefreshTagAdmin()" class="modern-btn-secondary">ğŸ”„ FrissÃ­tÃ©s</button>
              </div>
            </div>

            <div class="tag-admin-container">
              <div id="tagAdminContainer">
                <div class="table-loading">Tagok betÃ¶ltÃ©se...</div>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeTagAdminModal()">âŒ BezÃ¡rÃ¡s</button>
          </div>
        </div>
      </div>

      <div id="kickModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
          <div class="edit-modal-header">
            <h3>ğŸš« Tag kirÃºgÃ¡sa</h3>
            <span class="edit-close" onclick="closeKickModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <div class="member-info-card">
              <h4 id="kickMemberName"></h4>
              <p>Biztosan ki szeretnÃ©d rÃºgni ezt a tagot?</p>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="kickReason">ğŸ“ IndoklÃ¡s</label>
                <textarea id="kickReason" class="modern-input" placeholder="Add meg a kirÃºgÃ¡s indokÃ¡t..."></textarea>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeKickModal()">âŒ MÃ©gse</button>
            <button class="btn-confirm-sale" onclick="confirmKick()">âœ… KirÃºgÃ¡s megerÅ‘sÃ­tÃ©se</button>
          </div>
        </div>
      </div>

      <div id="changePasswordForUserModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--compact">
          <div class="edit-modal-header">
            <h3>ğŸ” JelszÃ³ vÃ¡ltÃ¡s</h3>
            <span class="edit-close" onclick="closeChangePasswordForUserModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <div id="changePasswordForUserMessage" class="message"></div>
            <div class="member-info-card centered">
              <h4 id="changePasswordForUserName"></h4>
              <p>Ãšj jelszÃ³ beÃ¡llÃ­tÃ¡sa</p>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="newPasswordForUser">ğŸ†• Ãšj jelszÃ³</label>
                <input type="password" id="newPasswordForUser" class="modern-input" placeholder="Add meg az Ãºj jelszÃ³t" autocomplete="new-password">
              </div>

              <div class="form-group">
                <label for="confirmPasswordForUser">âœ… Ãšj jelszÃ³ megerÅ‘sÃ­tÃ©se</label>
                <input type="password" id="confirmPasswordForUser" class="modern-input" placeholder="Add meg Ãºjra az Ãºj jelszÃ³t" autocomplete="new-password">
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeChangePasswordForUserModal()">âŒ MÃ©gse</button>
            <button class="btn-confirm-sale" onclick="changePasswordForUser()">ğŸ’¾ JelszÃ³ mentÃ©se</button>
          </div>
        </div>
      </div>

      <div id="kickedMembersModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--wide">
          <div class="edit-modal-header">
            <h3>ğŸ“‹ Tag tÃ¶rtÃ©net naplÃ³</h3>
            <span class="edit-close" onclick="closeKickedMembersModal()">&times;</span>
          </div>

          <div class="edit-modal-body scrollable">
            <div id="kickedMembersList" class="history-container">
              <div class="table-loading">NaplÃ³ betÃ¶ltÃ©se...</div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeKickedMembersModal()">âŒ BezÃ¡rÃ¡s</button>
          </div>
        </div>
      </div>

      <div id="badgeModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--wide">
          <div class="edit-modal-header">
            <h3>â­ KitÅ±zÅ‘k - Rang MegjegyzÃ©sek</h3>
            <span class="edit-close" onclick="closeBadgeModal()">&times;</span>
          </div>

          <div class="edit-modal-body scrollable">
            <div id="badgeMessage" class="message"></div>

            <div class="badge-add-form">
              <h4>â• Ãšj megjegyzÃ©s hozzÃ¡adÃ¡sa</h4>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="badgeRankSelect">ğŸ¯ Rang kivÃ¡lasztÃ¡sa</label>
                  <select id="badgeRankSelect" class="modern-input">
                    <option value="">VÃ¡lassz rangot...</option>
                    <option value="Owner">ğŸ‘‘ Owner</option>
                    <option value="Co-Owner">ğŸ’ Co-Owner</option>
                    <option value="Manager">ğŸ’¼ Manager</option>
                    <option value="Team Leader">â­ Team Leader</option>
                    <option value="Top Salesman">ğŸš€ Top Salesman</option>
                    <option value="Sr. Salesman">ğŸ”¶ Sr. Salesman</option>
                    <option value="Jr. Salesman">ğŸ”¹ Jr. Salesman</option>
                    <option value="Towing Specialist">ğŸ”§ Towing Specialist</option>
                    <option value="Tow Operator">âš¡ Tow Operator</option>
                    <option value="Truck Driver">ğŸš› Truck Driver</option>
                    <option value="Member">ğŸ‘¤ Member</option>
                  </select>
                </div>

                <div class="modern-form-group">
                  <label for="badgeNote">ğŸ“ MegjegyzÃ©s</label>
                  <textarea id="badgeNote" class="modern-input" placeholder="Ãrj megjegyzÃ©st ehhez a ranghoz..."></textarea>
                </div>
              </div>

              <div class="modern-form-actions">
                <button onclick="addBadgeNote()" class="modern-btn-primary">ğŸ’¾ MegjegyzÃ©s mentÃ©se</button>
                <button onclick="refreshBadges()" class="modern-btn-secondary">ğŸ”„ FrissÃ­tÃ©s</button>
              </div>
            </div>

            <div class="badge-container" id="badgeContainer">
              <div class="table-loading">KitÅ±zÅ‘k betÃ¶ltÃ©se...</div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeBadgeModal()">âŒ BezÃ¡rÃ¡s</button>
          </div>
        </div>
      </div>
    </div>

    <!-- TUNINGOK OLDAL -->
    <div id="tuningokPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn active" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">JelszÃ³</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>ğŸ”§ Tuning Ã¡rlista</h3>
              <p>Tuning opciÃ³k Ã©s Ã¡rak</p>
            </div>

            <div id="tuningMessage" class="message"></div>

            <div id="tuningAdminFunctions" class="modern-form-card nested" style="display: none;">
              <div class="modern-form-header">
                <h4>â• Ãšj tuning hozzÃ¡adÃ¡sa</h4>
              </div>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="tuningName">ğŸ”§ Tuning neve</label>
                  <input type="text" id="tuningName" class="modern-input" placeholder="Add meg a tuning nevÃ©t">
                </div>
                <div class="modern-form-group">
                  <label for="tuningPrice">ğŸ’° Ãr ($)</label>
                  <div class="modern-input-container price">
                    <input type="text" id="tuningPrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>
                <div class="modern-form-group">
                  <label for="tuningPPPrice">ğŸ¯ Ãr (PP)</label>
                  <div class="modern-input-container">
                    <input type="text" id="tuningPPPrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>
              </div>
              <div class="modern-form-actions">
                <button onclick="addTuning()" class="modern-btn-primary">â• Tuning hozzÃ¡adÃ¡sa</button>
                <button onclick="loadTunings()" class="modern-btn-secondary">ğŸ”„ FrissÃ­tÃ©s</button>
              </div>
            </div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>ğŸ”§ Tuning nÃ©v</th>
                    <th>ğŸ¯ Ãr (PP)</th>
                    <th>ğŸ’° Ãr ($)</th>
                    <th id="tuningActionHeader" style="display: none;">âš¡ MÅ±velet</th>
                  </tr>
                </thead>
                <tbody id="tuningTableBody">
                  <tr>
                    <td colspan="4" class="table-loading">Tuningok betÃ¶ltÃ©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>

      <div id="editTuningModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
          <div class="edit-modal-header">
            <h3>âœï¸ Tuning Ã¡r mÃ³dosÃ­tÃ¡sa</h3>
            <span class="edit-close" onclick="closeEditTuningModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <input type="hidden" id="editTuningId">
            <div class="car-info-card">
              <h4 id="editTuningName"></h4>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="editTuningPPPrice">ğŸ¯ Ãšj PP Ã¡r</label>
                <div class="price-input-container pp-price">
                  <input type="text" id="editTuningPPPrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">Ãrd be az Ãºj PP Ã¡rat</div>
              </div>

              <div class="form-group">
                <label for="editTuningPrice">ğŸ’° Ãšj $ Ã¡r</label>
                <div class="price-input-container price">
                  <input type="text" id="editTuningPrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">Ãrd be az Ãºj $ Ã¡rat</div>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeEditTuningModal()">âŒ MÃ©gse</button>
            <button class="btn-confirm-sale" onclick="saveTuningPrice()">ğŸ’¾ Ãrak mentÃ©se</button>
          </div>
        </div>
      </div>
    </div>

    <!-- STATISZTIKA OLDAL -->
    <div id="statisztikaPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn active" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">JelszÃ³</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>ğŸ“Š StatisztikÃ¡k</h3>
              <p>Legfontosabb mutatÃ³k egy helyen</p>
            </div>

            <div class="stats-container">
              <div class="stat-card">
                <h3>Ã–sszes autÃ³</h3>
                <div id="totalCars" class="stat-number">0</div>
              </div>
              <div class="stat-card">
                <h3>Eladott autÃ³k</h3>
                <div id="soldCars" class="stat-number">0</div>
              </div>
              <div class="stat-card">
                <h3>Ã–sszes profit</h3>
                <div id="totalProfit" class="stat-number">$</div>
              </div>
              <div class="stat-card">
                <h3>LegnÃ©pszerÅ±bb modell</h3>
                <div id="popularModel" class="stat-number">-</div>
              </div>
              <div class="stat-card">
                <h3>Ã–sszes tag</h3>
                <div id="totalTags" class="stat-number">0</div>
              </div>
            </div>
          </article>
        </div>
      </section>
    </div>

    <!-- AUTÃ“ ÃRAK OLDAL -->
    <div id="autokKepekPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn active" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">JelszÃ³</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>ğŸ–¼ï¸ AutÃ³ Ã¡rlista</h3>
              <p>AutÃ³k Ã©s ajÃ¡nlott Ã¡rak galÃ©ria nÃ©zetben</p>
            </div>

            <div id="galleryMessage" class="message"></div>

            <div id="galleryAdminFunctions" class="modern-form-card nested" style="display: none;">
              <div class="modern-form-header">
                <h4>â• Ãšj autÃ³ hozzÃ¡adÃ¡sa a listÃ¡hoz</h4>
              </div>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="galleryModelSearch">ğŸš— Modell</label>
                  <div class="model-search-container modern">
                    <input type="text" id="galleryModelSearch" class="modern-input" placeholder="KeresÃ©s modellek kÃ¶zÃ¶tt..."
                           onfocus="showGalleryModelDropdown()" oninput="filterGalleryModels()">
                    <div id="galleryModelDropdown" class="model-dropdown modern"></div>
                  </div>
                </div>

                <div class="modern-form-group">
                  <label for="galleryBasePrice">ğŸ’° Alap Ã¡r</label>
                  <div class="modern-input-container price">
                    <input type="text" id="galleryBasePrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>

                <div class="modern-form-group">
                  <label for="galleryPrice">ğŸ’µ EladÃ¡si Ã¡r</label>
                  <div class="modern-input-container price">
                    <input type="text" id="galleryPrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>
              </div>

              <div class="modern-image-section">
                <h4>ğŸ“· AutÃ³ kÃ©pe <span class="optional-label">(opcionÃ¡lis)</span></h4>
                <div class="modern-image-upload-container">
                  <input type="file" id="galleryCarImage" accept="image/*" style="display: none;" onchange="handleGalleryImageSelect(event)">
                  <button type="button" onclick="document.getElementById('galleryCarImage').click()" class="modern-image-upload-btn">
                    ğŸ“ KÃ©p kivÃ¡lasztÃ¡sa
                  </button>
                  <span id="galleryImageFileName" class="modern-image-file-name">Nincs kÃ©p kivÃ¡lasztva</span>
                </div>
                <div id="galleryImagePreview" class="modern-image-preview"></div>
              </div>

              <div class="modern-form-actions">
                <button onclick="addGalleryCar()" class="modern-btn-primary">â• AutÃ³ hozzÃ¡adÃ¡sa</button>
                <button onclick="loadCarGallery()" class="modern-btn-secondary">ğŸ”„ FrissÃ­tÃ©s</button>
              </div>
            </div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>ğŸ“· KÃ©p</th>
                    <th>ğŸš— Modell</th>
                    <th>ğŸ’° Alap Ã¡r</th>
                    <th>ğŸ’µ EladÃ¡si Ã¡r</th>
                    <th id="galleryActionHeader" style="display: none;">âš¡ MÅ±velet</th>
                  </tr>
                </thead>
                <tbody id="galleryTableBody">
                  <tr>
                    <td colspan="5" class="table-loading">AutÃ³ Ã¡rak betÃ¶ltÃ©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>

      <div id="editGalleryPriceModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
          <div class="edit-modal-header">
            <h3>âœï¸ Ãr mÃ³dosÃ­tÃ¡sa</h3>
            <span class="edit-close" onclick="closeEditGalleryPriceModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <input type="hidden" id="editGalleryCarId">
            <div class="car-info-card">
              <h4 id="editGalleryCarModel"></h4>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="editGalleryBasePrice">ğŸ’° Alap Ã¡r</label>
                <div class="price-input-container">
                  <input type="text" id="editGalleryBasePrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">Ãrd be az alap Ã¡rat</div>
              </div>

              <div class="form-group">
                <label for="editGalleryPrice">ğŸ’µ EladÃ¡si Ã¡r</label>
                <div class="price-input-container">
                  <input type="text" id="editGalleryPrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">Ãrd be az eladÃ¡si Ã¡rat</div>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeEditGalleryPriceModal()">âŒ MÃ©gse</button>
            <button class="btn-confirm-sale" onclick="saveGalleryPrice()">ğŸ’¾ Ãrak mentÃ©se</button>
          </div>
        </div>
      </div>
    </div>

    <!-- LOGIN OLDAL -->
    <div id="loginPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">HÃ­rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">EladÃ¡sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">GalÃ©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn active" onclick="showPage('login')">BelÃ©pÃ©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-login-card">
            <div class="modern-login-header">
              <h3>BelÃ©pÃ©s</h3>
              <p>SzerkesztÃ©shez jelentkezzen be!</p>
            </div>

            <div class="modern-login-form" id="loginForm">
              <div class="modern-form-group">
                <label for="username">ğŸ‘¤ FelhasznÃ¡lÃ³nÃ©v</label>
                <input type="text" id="username" placeholder="Ãrja be a felhasznÃ¡lÃ³nevÃ©t" class="modern-login-input" autocomplete="username">
              </div>

              <div class="modern-form-group">
                <label for="password">ğŸ”’ JelszÃ³</label>
                <input type="password" id="password" placeholder="Ãrja be a jelszavÃ¡t" class="modern-login-input" autocomplete="current-password">
              </div>

              <button type="button" onclick="handleLogin()" class="modern-login-btn" id="loginButton">BelÃ©pÃ©s</button>
            </div>

            <div class="modern-login-footer">
              <button onclick="showPage('autok')" class="modern-back-btn">â¬…ï¸ Vissza a bÃ¶ngÃ©szÃ©shez</button>
              <div id="loginMessage" class="message"></div>
            </div>
          </article>
        </div>
      </section>
    </div>

    <!-- JELSZÃ“VÃLTOZTATÃS MODAL -->
    <div id="changePasswordModal" class="edit-modal" style="display: none;">
      <div class="edit-modal-content edit-modal-content--compact">
        <div class="edit-modal-header">
          <h3>ğŸ” JelszÃ³ megvÃ¡ltoztatÃ¡sa</h3>
          <span class="edit-close" onclick="closeChangePasswordModal()">&times;</span>
        </div>

        <div class="edit-modal-body">
          <div id="changePasswordMessage" class="message"></div>

          <div class="sale-form">
            <div class="form-group">
              <label for="currentPassword">ğŸ”’ Jelenlegi jelszÃ³</label>
              <input type="password" id="currentPassword" class="modern-input" placeholder="Add meg a jelenlegi jelszavad" autocomplete="current-password">
            </div>

            <div class="form-group">
              <label for="newPassword">ğŸ†• Ãšj jelszÃ³</label>
              <input type="password" id="newPassword" class="modern-input" placeholder="Add meg az Ãºj jelszÃ³t" autocomplete="new-password">
            </div>

            <div class="form-group">
              <label for="confirmPassword">âœ… Ãšj jelszÃ³ megerÅ‘sÃ­tÃ©se</label>
              <input type="password" id="confirmPassword" class="modern-input" placeholder="Add meg Ãºjra az Ãºj jelszÃ³t" autocomplete="new-password">
            </div>
          </div>
        </div>

        <div class="edit-modal-footer">
          <button class="btn-cancel" onclick="closeChangePasswordModal()">âŒ MÃ©gse</button>
          <button class="btn-confirm-sale" onclick="changePassword()">ğŸ’¾ JelszÃ³ megvÃ¡ltoztatÃ¡sa</button>
        </div>
      </div>
    </div>

    <!-- AUTÃ“ ELADÃS MODAL -->
    <div id="editSaleModal" class="edit-modal" style="display: none;">
      <div class="edit-modal-content">
        <div class="edit-modal-header">
          <h3>ğŸš— AutÃ³ eladÃ¡sa</h3>
          <span class="edit-close" onclick="closeEditModal()">&times;</span>
        </div>

        <div class="edit-modal-body">
          <div class="car-info-card with-image">
            <div class="car-image-preview">
              <img id="editCarImage" src="" alt="AutÃ³ kÃ©p">
            </div>
            <div class="car-details">
              <h4 id="editCarModel"></h4>
              <div class="price-info-grid">
                <div class="price-item">
                  <span class="price-label">VÃ©teliÃ¡r:</span>
                  <span id="editPurchasePrice" class="price-value"></span>
                </div>
                <div class="price-item">
                  <span class="price-label">Jelenlegi Ã¡r:</span>
                  <span id="editCurrentPrice" class="price-value"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="sale-form">
            <div class="form-group">
              <label>ğŸ’° EladÃ¡s tÃ­pusa</label>
              <div class="sale-type-selector">
                <label class="sale-type-option sale-type-option--cash">
                  <input type="radio" name="saleType" value="kp" id="saleTypeKp" checked onchange="updateProfitCalculator()">
                  <div class="sale-type-card">
                    <div class="sale-type-title">ğŸ’µ KÃ©szpÃ©nz</div>
                    <div class="sale-type-subtitle">Nincs adÃ³</div>
                  </div>
                </label>
                <label class="sale-type-option sale-type-option--normal">
                  <input type="radio" name="saleType" value="normal" id="saleTypeNormal" onchange="updateProfitCalculator()">
                  <div class="sale-type-card">
                    <div class="sale-type-title">ğŸª NormÃ¡l</div>
                    <div class="sale-type-subtitle">-7.5% adÃ³</div>
                  </div>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="editSalePrice">ğŸ’µ EladÃ¡si Ã¡r</label>
              <div class="price-input-container">
                <input type="text" id="editSalePrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this); updateProfitCalculator();">
              </div>
              <div class="price-hint">Ãrd be az Ã¡rat, automatikusan formÃ¡zÃ³dik</div>
            </div>

            <div class="profit-calc" id="profitCalc">
              <div class="profit-header">ğŸ“Š Profit szÃ¡mÃ­tÃ¡s</div>
              <div class="profit-row">
                <span>VÃ©teliÃ¡r:</span>
                <span id="calcPurchase">0 $</span>
              </div>
              <div class="profit-row">
                <span>EladÃ¡si Ã¡r:</span>
                <span id="calcSale">0 $</span>
              </div>
              <div class="profit-row" id="taxLabel" style="display: none;">
                <span>AdÃ³ (7.5%):</span>
                <span id="calcTax">0 $</span>
              </div>
              <div class="profit-row" id="netSaleLabel" style="display: none;">
                <span>NettÃ³ Ã¡r:</span>
                <span id="calcNetSale">0 $</span>
              </div>
              <div class="profit-row total">
                <span>EredmÃ©ny:</span>
                <span id="calcProfit">0 $</span>
              </div>
            </div>
          </div>
        </div>

        <div class="edit-modal-footer">
          <button class="btn-cancel" onclick="closeEditModal()">âŒ MÃ©gse</button>
          <button class="btn-confirm-sale" onclick="confirmSaleWithEdit()">âœ… AutÃ³ eladva</button>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer id="siteFooter" class="site-footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <div class="footer-logo-mark" aria-hidden="true">
          <img src="https://i.imgur.com/wEi6GRD.png" alt="JM" class="footer-logo-mark">
        </div>
        <div class="footer-brand-text">
          <div class="footer-title">JIMENEZ MOTORS INC.</div>
          <div class="footer-subtitle">AutÃ³kereskedÃ©s & Transport</div>
        </div>
        <p class="footer-description"></p>
      </div>

      <div class="footer-links">
        <h4>NavigÃ¡ciÃ³</h4>
        <ul class="footer-link-list">
          <li><a href="#autokPage" class="footer-link" onclick="showPage('autok'); return false;">HÃ­rek</a></li>
          <li class="footer-link-protected"><a href="#eladottAutokPage" class="footer-link" onclick="showPage('eladottAutok'); return false;">EladÃ¡sok</a></li>
          <li><a href="#tagokPage" class="footer-link" onclick="showPage('tagok'); return false;">Csapat</a></li>
          <li class="footer-link-protected"><a href="#statisztikaPage" class="footer-link" onclick="showPage('statisztika'); return false;">Statisztika</a></li>
          <li class="footer-link-protected"><a href="#autokKepekPage" class="footer-link" onclick="showPage('autokKepek'); return false;">GalÃ©ria</a></li>
          <li class="footer-link-protected"><a href="#tuningokPage" class="footer-link" onclick="showPage('tuningok'); return false;">Tuning</a></li>
        </ul>
      </div>

      <div class="footer-contact">
        <h4>Kapcsolat</h4>
        <ul class="footer-contact-list">
          <li><span class="footer-link">â˜ï¸ 112 879 248</span></li>
          <li><span class="footer-link">â˜ï¸ 114 995 465</span></li>
          <li>ğŸ“ San Fierro</li>
        </ul>
      </div>

      <div class="footer-community">
        <h4>KÃ¶zÃ¶ssÃ©g</h4>
        <p class="footer-description">Csatlakozz a legfrissebb akciÃ³kÃ©rt.</p>
        <div class="footer-social">
          <a class="footer-social-btn" href="https://discord.gg/dTTbgP2Xv5" target="_blank" rel="noopener">
            <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord" width="24" height="24">
          </a>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <span>Â© <span id="footerYear"></span> Jimenez Motors â€” Minden jog fenntartva</span>
    </div>
  </footer>

  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/main.js"></script>
  <script src="js/cars.js"></script>
  <script src="js/soldcars.js"></script>
  <script src="js/gallery.js"></script>
  <script src="js/members.js"></script>
  <script src="js/tuning.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/modals.js"></script>
  <script src="js/tagadmin.js"></script>
</body>
</html>
