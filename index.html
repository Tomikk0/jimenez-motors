<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jimenez Motors Admin</title>
  <base target="_top">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/pages.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/halloween.css">
  <link rel="stylesheet" href="css/modern.css">
  <link rel="stylesheet" href="css/dark-theme.css">
  <link rel="stylesheet" href="css/obsidian.css">
</head>
<body class="modern-theme">
  <main id="siteMain" class="site-main">
    <header class="header-with-image dashboard-hero">
      <div class="header-content">
        <div class="header-logo-container">
          <img src="https://i.imgur.com/wEi6GRD.png" alt="Jimenez Motors Logo" class="header-image">
          <div class="header-text">
            <div class="logo-main">JIMENEZ MOTORS</div>
            <div class="logo-subtitle">Aktu√°lis h√≠rek & k√©szlet</div>
          </div>
        </div>
      </div>
    </header>

    <!-- AUT√ìK OLDAL -->
    <div id="autokPage" class="page active">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn active" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">Jelsz√≥</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <section class="news-section glass-card">
            <div class="section-heading">
              <p class="eyebrow">Jimenez Motors</p>
              <h2>Aktu√°lis h√≠rek</h2>
            </div>
            <div class="news-grid">
              <article class="news-card">
                <h3>√öj tuningcsomagok</h3>
                <p>Stage 3 csomag m√©g t√∂bb l√≥er≈ët hoz ‚Äì mostant√≥l el√©rhet≈ë a gar√°zsban.</p>
                <span class="news-date">2025.10.20</span>
              </article>
              <article class="news-card">
                <h3>≈êszi akci√≥</h3>
                <p>Az ≈ëszi k√©szlet 10% kedvezm√©nnyel √©rkezik. Foglalj id≈ëpontot tesztvezet√©sre!</p>
                <span class="news-date">2025.10.26</span>
              </article>
              <article class="news-card">
                <h3>√öj modellek √©rkeztek</h3>
                <p>A legfrissebb eur√≥pai importok m√°r megtekinthet≈ëk a bemutat√≥teremben.</p>
                <span class="news-date">2025.09.29</span>
              </article>
            </div>
          </section>

          <section class="cars-section glass-card">
            <div class="section-heading">
              <h2>Elad√≥ aut√≥k</h2>
              <span class="section-hint">H√∫zd jobbra/balra</span>
            </div>

            <div id="message" class="message"></div>

            <div class="car-carousel">
              <div id="carCardTrack" class="car-card-track">
                <div class="car-card placeholder-card">
                  <p>Aut√≥k bet√∂lt√©se...</p>
                </div>
              </div>
            </div>
          </section>

          <section class="upload-section glass-card">
            <div class="section-heading">
              <h2>√öj aut√≥ felt√∂lt√©se</h2>
              <p>≈êrizd meg a k√©szlet naprak√©szs√©g√©t egy kattint√°ssal.</p>
            </div>
            <div id="adminFunctions" class="admin-actions" style="display: none;">
              <button type="button" class="accent-btn" onclick="openCarUploadModal()">Felt√∂lt√©s</button>
              <button type="button" class="ghost-btn" onclick="loadCars()">Lista friss√≠t√©se</button>
            </div>
            <div class="upload-cta" id="uploadCtaFallback">
              <p>Jelentkezz be, hogy √∫j aut√≥t r√∂gz√≠thess.</p>
            </div>
          </section>
        </div>
      </section>
    </div>

    <!-- AUT√ì FELT√ñLT√âS MODAL -->
    <div id="carUploadModal" class="neo-modal" aria-hidden="true">
      <div class="neo-modal__backdrop" onclick="closeCarUploadModal()"></div>
      <div class="neo-modal__dialog" role="dialog" aria-modal="true">
        <button type="button" class="neo-modal__close" onclick="closeCarUploadModal()" aria-label="Bez√°r√°s">&times;</button>
        <div class="modern-form-card neo-modal__content">
          <div class="modern-form-header">
            <p class="modal-kicker">√öj aut√≥ felt√∂lt√©se</p>
            <h3>üöó T√∂ltsd fel a friss k√©szletet</h3>
            <p class="modal-subtitle">Minden mez≈ë kit√∂lt√©se seg√≠t a csapatnak naprak√©sz maradni.</p>
          </div>

          <div class="modern-form-row">
            <div class="modern-form-group">
              <label for="modelSearch">üîç Modell</label>
              <div class="model-search-container modern">
                <input type="text" id="modelSearch" class="modern-input" placeholder="Keres√©s modellek k√∂z√∂tt..."
                       onfocus="showModelDropdown()" oninput="filterModels()">
                <div id="modelDropdown" class="model-dropdown modern"></div>
              </div>
            </div>

            <div class="modern-form-group">
              <label for="vetel">üí∞ V√©teli √°r</label>
              <div class="modern-input-container price">
                <input type="text" id="vetel" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
              </div>
            </div>

            <div class="modern-form-group">
              <label for="kivant">üéØ K√≠v√°nt minimum √°r</label>
              <div class="modern-input-container price">
                <input type="text" id="kivant" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
              </div>
            </div>

            <div class="modern-form-group">
              <label for="eladas">üíµ Elad√°si √°r</label>
              <div class="modern-input-container price">
                <input type="text" id="eladas" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
              </div>
            </div>
          </div>

          <div class="modern-image-section">
            <h4>üì∑ Aut√≥ k√©pe</h4>
            <div class="modern-image-upload-container">
              <input type="file" id="carImage" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
              <button type="button" onclick="document.getElementById('carImage').click()" class="modern-image-upload-btn">
                üìÅ K√©p kiv√°laszt√°sa
              </button>
              <span id="imageFileName" class="modern-image-file-name">Nincs k√©p kiv√°lasztva</span>
            </div>
            <div id="imagePreview" class="modern-image-preview"></div>
          </div>

          <div class="modern-form-group">
            <label>üîß Tuning opci√≥k</label>
            <div id="tuningContainer" class="modern-tuning-container">Bet√∂lt√©s...</div>
          </div>

          <div class="modern-form-actions">
            <button onclick="addCar()" class="modern-btn-primary">Felt√∂lt√©s</button>
            <button type="button" class="modern-btn-secondary" onclick="closeCarUploadModal()">M√©gse</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ELADOTT AUT√ìK OLDAL -->
    <div id="eladottAutokPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn active" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">Jelsz√≥</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>‚úÖ Eladott Aut√≥k</h3>
            </div>

            <div id="soldCarsMessage" class="message"></div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>üì∑ K√©p</th>
                    <th>üöó Modell</th>
                    <th>üîß Tuning</th>
                    <th>üí∞ V√©tel√°r</th>
                    <th>üíµ Elad√°si √°r</th>
                    <th>üìà Profit</th>
                    <th>üë§ Eladta</th>
                    <th>üìÖ Elad√°s d√°tuma</th>
                  </tr>
                </thead>
                <tbody id="soldCarsTableBody">
                  <tr>
                    <td colspan="8" class="table-loading">Eladott aut√≥k bet√∂lt√©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>
    </div>

    <!-- TAGOK OLDAL -->
    <div id="tagokPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn active" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">Jelsz√≥</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>üë• Tagok</h3>
              <p>Jimenez Motors csapattagjai</p>
            </div>

            <div class="form-header-with-filters">
              <div class="form-title"></div>
              <div id="tagAdminFunctions" class="compact-filters-row">
                <button id="historyButton" class="modern-btn-secondary" onclick="showKickedMembersHistory()">üìã Tag t√∂rt√©net</button>
                <button id="badgeButton" class="modern-btn-secondary" onclick="openBadgeModal()">‚≠ê Kit≈±z≈ëk</button>
                <button id="tagAdminButton" class="modern-btn-secondary" onclick="openTagAdminModal()">üëë Tag Admin</button>
              </div>
            </div>

            <div id="tagMessage" class="message"></div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>üë§ N√©v</th>
                    <th>‚≠ê Rang</th>
                    <th>üìÖ Felv√©tel d√°tuma</th>
                    <th id="tagActionHeader" style="display: none;">‚öôÔ∏è M≈±veletek</th>
                  </tr>
                </thead>
                <tbody id="tagsTableBody">
                  <tr>
                    <td colspan="4" class="table-loading">Tagok bet√∂lt√©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>

      <!-- TAG ADMIN MODAL -->
      <div id="tagAdminModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--wide">
          <div class="edit-modal-header">
            <h3>üëë Tag Adminisztr√°ci√≥</h3>
            <span class="edit-close" onclick="closeTagAdminModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <div id="tagAdminMessage" class="message"></div>

            <div class="badge-add-form">
              <h4>‚ûï √öj Tag Hozz√°ad√°sa</h4>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="newTagName">üë§ IG N√©v (Megjelen√≠tett n√©v)</label>
                  <input type="text" id="newTagName" class="modern-input" placeholder="√çrd be a tag IG nev√©t...">
                  <div class="input-hint">Ez a n√©v jelenik meg a tagok list√°j√°ban</div>
                </div>

                <div class="modern-form-group">
                  <label for="newUsername">üîê Felhaszn√°l√≥n√©v (Bel√©p√©shez)</label>
                  <input type="text" id="newUsername" class="modern-input" placeholder="√çrd be a felhaszn√°l√≥nevet...">
                  <div class="input-hint">Ezzel a n√©vvel tud bejelentkezni</div>
                </div>

                <div class="modern-form-group">
                  <label for="newTagPhone">üìû Telefonsz√°m (opcion√°lis)</label>
                  <input type="text" id="newTagPhone" class="modern-input" placeholder="+36...">
                </div>
              </div>

              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="newUserRole">üéØ Hozz√°f√©r√©si Szint</label>
                  <select id="newUserRole" class="modern-input">
                    <option value="user">üë§ User - Alap hozz√°f√©r√©s</option>
                    <option value="admin">üëë Admin - Teljes hozz√°f√©r√©s</option>
                  </select>
                  <div class="input-hint">Meghat√°rozza, milyen oldalak √©rhet≈ëek el</div>
                </div>

                <div class="modern-form-group">
                  <label for="newTagRank">‚≠ê Rang Megjelen√≠t√©s</label>
                  <select id="newTagRank" class="modern-input">
                    <option value="">V√°lassz rangot...</option>
                    <option value="Owner">üëë Owner</option>
                    <option value="Co-Owner">üíé Co-Owner</option>
                    <option value="Manager">üíº Manager</option>
                    <option value="Team Leader">‚≠ê Team Leader</option>
                    <option value="Top Salesman">üöÄ Top Salesman</option>
                    <option value="Sr. Salesman">üî∂ Sr. Salesman</option>
                    <option value="Jr. Salesman">üîπ Jr. Salesman</option>
                    <option value="Towing Specialist">üîß Towing Specialist</option>
                    <option value="Tow Operator">‚ö° Tow Operator</option>
                    <option value="Truck Driver">üöõ Truck Driver</option>
                    <option value="Member">üë§ Member</option>
                  </select>
                  <div class="input-hint">Ez jelenik meg a n√©v mellett</div>
                </div>
              </div>

              <div class="modern-form-row">
                <div class="modern-form-group full-width">
                  <label for="customPassword">üîê Jelsz√≥</label>
                  <input type="password" id="customPassword" class="modern-input" placeholder="√çrd be a jelsz√≥t...">
                  <div class="input-hint">A tag ezzel a jelsz√≥val tud bejelentkezni (minimum 4 karakter)</div>
                </div>
              </div>

              <div class="modern-form-actions">
                <button onclick="addTagWithAccount()" class="modern-btn-primary">üíæ Tag hozz√°ad√°sa</button>
                <button onclick="clearTagAdminForm()" class="modern-btn-secondary">üóëÔ∏è ≈∞rlap t√∂rl√©se</button>
                <button onclick="forceRefreshTagAdmin()" class="modern-btn-secondary">üîÑ Friss√≠t√©s</button>
              </div>
            </div>

            <div class="tag-admin-container">
              <div id="tagAdminContainer">
                <div class="table-loading">Tagok bet√∂lt√©se...</div>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeTagAdminModal()">‚ùå Bez√°r√°s</button>
          </div>
        </div>
      </div>

      <div id="kickModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
          <div class="edit-modal-header">
            <h3>üö´ Tag kir√∫g√°sa</h3>
            <span class="edit-close" onclick="closeKickModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <div class="member-info-card">
              <h4 id="kickMemberName"></h4>
              <p>Biztosan ki szeretn√©d r√∫gni ezt a tagot?</p>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="kickReason">üìù Indokl√°s</label>
                <textarea id="kickReason" class="modern-input" placeholder="Add meg a kir√∫g√°s indok√°t..."></textarea>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeKickModal()">‚ùå M√©gse</button>
            <button class="btn-confirm-sale" onclick="confirmKick()">‚úÖ Kir√∫g√°s meger≈ës√≠t√©se</button>
          </div>
        </div>
      </div>

      <div id="changePasswordForUserModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--compact">
          <div class="edit-modal-header">
            <h3>üîê Jelsz√≥ v√°lt√°s</h3>
            <span class="edit-close" onclick="closeChangePasswordForUserModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <div id="changePasswordForUserMessage" class="message"></div>
            <div class="member-info-card centered">
              <h4 id="changePasswordForUserName"></h4>
              <p>√öj jelsz√≥ be√°ll√≠t√°sa</p>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="newPasswordForUser">üÜï √öj jelsz√≥</label>
                <input type="password" id="newPasswordForUser" class="modern-input" placeholder="Add meg az √∫j jelsz√≥t" autocomplete="new-password">
              </div>

              <div class="form-group">
                <label for="confirmPasswordForUser">‚úÖ √öj jelsz√≥ meger≈ës√≠t√©se</label>
                <input type="password" id="confirmPasswordForUser" class="modern-input" placeholder="Add meg √∫jra az √∫j jelsz√≥t" autocomplete="new-password">
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeChangePasswordForUserModal()">‚ùå M√©gse</button>
            <button class="btn-confirm-sale" onclick="changePasswordForUser()">üíæ Jelsz√≥ ment√©se</button>
          </div>
        </div>
      </div>

      <div id="kickedMembersModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--wide">
          <div class="edit-modal-header">
            <h3>üìã Tag t√∂rt√©net napl√≥</h3>
            <span class="edit-close" onclick="closeKickedMembersModal()">&times;</span>
          </div>

          <div class="edit-modal-body scrollable">
            <div id="kickedMembersList" class="history-container">
              <div class="table-loading">Napl√≥ bet√∂lt√©se...</div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeKickedMembersModal()">‚ùå Bez√°r√°s</button>
          </div>
        </div>
      </div>

      <div id="badgeModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content edit-modal-content--wide">
          <div class="edit-modal-header">
            <h3>‚≠ê Kit≈±z≈ëk - Rang Megjegyz√©sek</h3>
            <span class="edit-close" onclick="closeBadgeModal()">&times;</span>
          </div>

          <div class="edit-modal-body scrollable">
            <div id="badgeMessage" class="message"></div>

            <div class="badge-add-form">
              <h4>‚ûï √öj megjegyz√©s hozz√°ad√°sa</h4>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="badgeRankSelect">üéØ Rang kiv√°laszt√°sa</label>
                  <select id="badgeRankSelect" class="modern-input">
                    <option value="">V√°lassz rangot...</option>
                    <option value="Owner">üëë Owner</option>
                    <option value="Co-Owner">üíé Co-Owner</option>
                    <option value="Manager">üíº Manager</option>
                    <option value="Team Leader">‚≠ê Team Leader</option>
                    <option value="Top Salesman">üöÄ Top Salesman</option>
                    <option value="Sr. Salesman">üî∂ Sr. Salesman</option>
                    <option value="Jr. Salesman">üîπ Jr. Salesman</option>
                    <option value="Towing Specialist">üîß Towing Specialist</option>
                    <option value="Tow Operator">‚ö° Tow Operator</option>
                    <option value="Truck Driver">üöõ Truck Driver</option>
                    <option value="Member">üë§ Member</option>
                  </select>
                </div>

                <div class="modern-form-group">
                  <label for="badgeNote">üìù Megjegyz√©s</label>
                  <textarea id="badgeNote" class="modern-input" placeholder="√çrj megjegyz√©st ehhez a ranghoz..."></textarea>
                </div>
              </div>

              <div class="modern-form-actions">
                <button onclick="addBadgeNote()" class="modern-btn-primary">üíæ Megjegyz√©s ment√©se</button>
                <button onclick="refreshBadges()" class="modern-btn-secondary">üîÑ Friss√≠t√©s</button>
              </div>
            </div>

            <div class="badge-container" id="badgeContainer">
              <div class="table-loading">Kit≈±z≈ëk bet√∂lt√©se...</div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeBadgeModal()">‚ùå Bez√°r√°s</button>
          </div>
        </div>
      </div>
    </div>

    <!-- TUNINGOK OLDAL -->
    <div id="tuningokPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn active" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">Jelsz√≥</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>üîß Tuning √°rlista</h3>
              <p>Tuning opci√≥k √©s √°rak</p>
            </div>

            <div id="tuningMessage" class="message"></div>

            <div id="tuningAdminFunctions" class="modern-form-card nested" style="display: none;">
              <div class="modern-form-header">
                <h4>‚ûï √öj tuning hozz√°ad√°sa</h4>
              </div>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="tuningName">üîß Tuning neve</label>
                  <input type="text" id="tuningName" class="modern-input" placeholder="Add meg a tuning nev√©t">
                </div>
                <div class="modern-form-group">
                  <label for="tuningPrice">üí∞ √År ($)</label>
                  <div class="modern-input-container price">
                    <input type="text" id="tuningPrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>
                <div class="modern-form-group">
                  <label for="tuningPPPrice">üéØ √År (PP)</label>
                  <div class="modern-input-container">
                    <input type="text" id="tuningPPPrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>
              </div>
              <div class="modern-form-actions">
                <button onclick="addTuning()" class="modern-btn-primary">‚ûï Tuning hozz√°ad√°sa</button>
                <button onclick="loadTunings()" class="modern-btn-secondary">üîÑ Friss√≠t√©s</button>
              </div>
            </div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>üîß Tuning n√©v</th>
                    <th>üéØ √År (PP)</th>
                    <th>üí∞ √År ($)</th>
                    <th id="tuningActionHeader" style="display: none;">‚ö° M≈±velet</th>
                  </tr>
                </thead>
                <tbody id="tuningTableBody">
                  <tr>
                    <td colspan="4" class="table-loading">Tuningok bet√∂lt√©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>

      <div id="editTuningModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
          <div class="edit-modal-header">
            <h3>‚úèÔ∏è Tuning √°r m√≥dos√≠t√°sa</h3>
            <span class="edit-close" onclick="closeEditTuningModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <input type="hidden" id="editTuningId">
            <div class="car-info-card">
              <h4 id="editTuningName"></h4>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="editTuningPPPrice">üéØ √öj PP √°r</label>
                <div class="price-input-container pp-price">
                  <input type="text" id="editTuningPPPrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">√çrd be az √∫j PP √°rat</div>
              </div>

              <div class="form-group">
                <label for="editTuningPrice">üí∞ √öj $ √°r</label>
                <div class="price-input-container price">
                  <input type="text" id="editTuningPrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">√çrd be az √∫j $ √°rat</div>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeEditTuningModal()">‚ùå M√©gse</button>
            <button class="btn-confirm-sale" onclick="saveTuningPrice()">üíæ √Årak ment√©se</button>
          </div>
        </div>
      </div>
    </div>

    <!-- STATISZTIKA OLDAL -->
    <div id="statisztikaPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn active" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">Jelsz√≥</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>üìä Statisztik√°k</h3>
              <p>Legfontosabb mutat√≥k egy helyen</p>
            </div>

            <div class="stats-container">
              <div class="stat-card">
                <h3>√ñsszes aut√≥</h3>
                <div id="totalCars" class="stat-number">0</div>
              </div>
              <div class="stat-card">
                <h3>Eladott aut√≥k</h3>
                <div id="soldCars" class="stat-number">0</div>
              </div>
              <div class="stat-card">
                <h3>√ñsszes profit</h3>
                <div id="totalProfit" class="stat-number">$</div>
              </div>
              <div class="stat-card">
                <h3>Legn√©pszer≈±bb modell</h3>
                <div id="popularModel" class="stat-number">-</div>
              </div>
              <div class="stat-card">
                <h3>√ñsszes tag</h3>
                <div id="totalTags" class="stat-number">0</div>
              </div>
            </div>
          </article>
        </div>
      </section>
    </div>

    <!-- AUT√ì √ÅRAK OLDAL -->
    <div id="autokKepekPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn active" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn password-btn" onclick="openChangePasswordModal()" style="display: none;">Jelsz√≥</button>
          <button class="nav-btn login-btn" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-form-card">
            <div class="modern-form-header">
              <h3>üñºÔ∏è Aut√≥ √°rlista</h3>
              <p>Aut√≥k √©s aj√°nlott √°rak gal√©ria n√©zetben</p>
            </div>

            <div id="galleryMessage" class="message"></div>

            <div id="galleryAdminFunctions" class="modern-form-card nested" style="display: none;">
              <div class="modern-form-header">
                <h4>‚ûï √öj aut√≥ hozz√°ad√°sa a list√°hoz</h4>
              </div>
              <div class="modern-form-row">
                <div class="modern-form-group">
                  <label for="galleryModelSearch">üöó Modell</label>
                  <div class="model-search-container modern">
                    <input type="text" id="galleryModelSearch" class="modern-input" placeholder="Keres√©s modellek k√∂z√∂tt..."
                           onfocus="showGalleryModelDropdown()" oninput="filterGalleryModels()">
                    <div id="galleryModelDropdown" class="model-dropdown modern"></div>
                  </div>
                </div>

                <div class="modern-form-group">
                  <label for="galleryBasePrice">üí∞ Alap √°r</label>
                  <div class="modern-input-container price">
                    <input type="text" id="galleryBasePrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>

                <div class="modern-form-group">
                  <label for="galleryPrice">üíµ Elad√°si √°r</label>
                  <div class="modern-input-container price">
                    <input type="text" id="galleryPrice" class="modern-input" placeholder="0" oninput="formatInputPrice(this)">
                  </div>
                </div>
              </div>

              <div class="modern-image-section">
                <h4>üì∑ Aut√≥ k√©pe <span class="optional-label">(opcion√°lis)</span></h4>
                <div class="modern-image-upload-container">
                  <input type="file" id="galleryCarImage" accept="image/*" style="display: none;" onchange="handleGalleryImageSelect(event)">
                  <button type="button" onclick="document.getElementById('galleryCarImage').click()" class="modern-image-upload-btn">
                    üìÅ K√©p kiv√°laszt√°sa
                  </button>
                  <span id="galleryImageFileName" class="modern-image-file-name">Nincs k√©p kiv√°lasztva</span>
                </div>
                <div id="galleryImagePreview" class="modern-image-preview"></div>
              </div>

              <div class="modern-form-actions">
                <button onclick="addGalleryCar()" class="modern-btn-primary">‚ûï Aut√≥ hozz√°ad√°sa</button>
                <button onclick="loadCarGallery()" class="modern-btn-secondary">üîÑ Friss√≠t√©s</button>
              </div>
            </div>

            <div class="modern-table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>üì∑ K√©p</th>
                    <th>üöó Modell</th>
                    <th>üí∞ Alap √°r</th>
                    <th>üíµ Elad√°si √°r</th>
                    <th id="galleryActionHeader" style="display: none;">‚ö° M≈±velet</th>
                  </tr>
                </thead>
                <tbody id="galleryTableBody">
                  <tr>
                    <td colspan="5" class="table-loading">Aut√≥ √°rak bet√∂lt√©se...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>
        </div>
      </section>

      <div id="editGalleryPriceModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-content">
          <div class="edit-modal-header">
            <h3>‚úèÔ∏è √År m√≥dos√≠t√°sa</h3>
            <span class="edit-close" onclick="closeEditGalleryPriceModal()">&times;</span>
          </div>

          <div class="edit-modal-body">
            <input type="hidden" id="editGalleryCarId">
            <div class="car-info-card">
              <h4 id="editGalleryCarModel"></h4>
            </div>

            <div class="sale-form">
              <div class="form-group">
                <label for="editGalleryBasePrice">üí∞ Alap √°r</label>
                <div class="price-input-container">
                  <input type="text" id="editGalleryBasePrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">√çrd be az alap √°rat</div>
              </div>

              <div class="form-group">
                <label for="editGalleryPrice">üíµ Elad√°si √°r</label>
                <div class="price-input-container">
                  <input type="text" id="editGalleryPrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this)">
                </div>
                <div class="price-hint">√çrd be az elad√°si √°rat</div>
              </div>
            </div>
          </div>

          <div class="edit-modal-footer">
            <button class="btn-cancel" onclick="closeEditGalleryPriceModal()">‚ùå M√©gse</button>
            <button class="btn-confirm-sale" onclick="saveGalleryPrice()">üíæ √Årak ment√©se</button>
          </div>
        </div>
      </div>
    </div>

    <!-- LOGIN OLDAL -->
    <div id="loginPage" class="page">
      <section class="page-shell">
        <nav class="main-nav">
          <button class="nav-btn" onclick="showPage('autok')">H√≠rek</button>
          <button class="nav-btn" onclick="showPage('eladottAutok')">Elad√°sok</button>
          <button class="nav-btn" onclick="showPage('tagok')">Csapat</button>
          <button class="nav-btn" onclick="showPage('statisztika')">Statisztika</button>
          <button class="nav-btn" onclick="showPage('autokKepek')">Gal√©ria</button>
          <button class="nav-btn" onclick="showPage('tuningok')">Tuning</button>
          <button class="nav-btn active" onclick="showPage('login')">Bel√©p√©s</button>
        </nav>

        <div class="page-content">
          <article class="modern-login-card">
            <div class="modern-login-header">
              <h3>Bel√©p√©s</h3>
              <p>Szerkeszt√©shez jelentkezzen be!</p>
            </div>

            <div class="modern-login-form" id="loginForm">
              <div class="modern-form-group">
                <label for="username">üë§ Felhaszn√°l√≥n√©v</label>
                <input type="text" id="username" placeholder="√çrja be a felhaszn√°l√≥nev√©t" class="modern-login-input" autocomplete="username">
              </div>

              <div class="modern-form-group">
                <label for="password">üîí Jelsz√≥</label>
                <input type="password" id="password" placeholder="√çrja be a jelszav√°t" class="modern-login-input" autocomplete="current-password">
              </div>

              <button type="button" onclick="handleLogin()" class="modern-login-btn" id="loginButton">Bel√©p√©s</button>
            </div>

            <div class="modern-login-footer">
              <button onclick="showPage('autok')" class="modern-back-btn">‚¨ÖÔ∏è Vissza a b√∂ng√©sz√©shez</button>
              <div id="loginMessage" class="message"></div>
            </div>
          </article>
        </div>
      </section>
    </div>

    <!-- JELSZ√ìV√ÅLTOZTAT√ÅS MODAL -->
    <div id="changePasswordModal" class="edit-modal" style="display: none;">
      <div class="edit-modal-content edit-modal-content--compact">
        <div class="edit-modal-header">
          <h3>üîê Jelsz√≥ megv√°ltoztat√°sa</h3>
          <span class="edit-close" onclick="closeChangePasswordModal()">&times;</span>
        </div>

        <div class="edit-modal-body">
          <div id="changePasswordMessage" class="message"></div>

          <div class="sale-form">
            <div class="form-group">
              <label for="currentPassword">üîí Jelenlegi jelsz√≥</label>
              <input type="password" id="currentPassword" class="modern-input" placeholder="Add meg a jelenlegi jelszavad" autocomplete="current-password">
            </div>

            <div class="form-group">
              <label for="newPassword">üÜï √öj jelsz√≥</label>
              <input type="password" id="newPassword" class="modern-input" placeholder="Add meg az √∫j jelsz√≥t" autocomplete="new-password">
            </div>

            <div class="form-group">
              <label for="confirmPassword">‚úÖ √öj jelsz√≥ meger≈ës√≠t√©se</label>
              <input type="password" id="confirmPassword" class="modern-input" placeholder="Add meg √∫jra az √∫j jelsz√≥t" autocomplete="new-password">
            </div>
          </div>
        </div>

        <div class="edit-modal-footer">
          <button class="btn-cancel" onclick="closeChangePasswordModal()">‚ùå M√©gse</button>
          <button class="btn-confirm-sale" onclick="changePassword()">üíæ Jelsz√≥ megv√°ltoztat√°sa</button>
        </div>
      </div>
    </div>

    <!-- AUT√ì ELAD√ÅS MODAL -->
    <div id="editSaleModal" class="edit-modal" style="display: none;">
      <div class="edit-modal-content">
        <div class="edit-modal-header">
          <h3>üöó Aut√≥ elad√°sa</h3>
          <span class="edit-close" onclick="closeEditModal()">&times;</span>
        </div>

        <div class="edit-modal-body">
          <div class="car-info-card with-image">
            <div class="car-image-preview">
              <img id="editCarImage" src="" alt="Aut√≥ k√©p">
            </div>
            <div class="car-details">
              <h4 id="editCarModel"></h4>
              <div class="price-info-grid">
                <div class="price-item">
                  <span class="price-label">V√©teli√°r:</span>
                  <span id="editPurchasePrice" class="price-value"></span>
                </div>
                <div class="price-item">
                  <span class="price-label">Jelenlegi √°r:</span>
                  <span id="editCurrentPrice" class="price-value"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="sale-form">
            <div class="form-group">
              <label>üí∞ Elad√°s t√≠pusa</label>
              <div class="sale-type-selector">
                <label class="sale-type-option sale-type-option--cash">
                  <input type="radio" name="saleType" value="kp" id="saleTypeKp" checked onchange="updateProfitCalculator()">
                  <div class="sale-type-card">
                    <div class="sale-type-title">üíµ K√©szp√©nz</div>
                    <div class="sale-type-subtitle">Nincs ad√≥</div>
                  </div>
                </label>
                <label class="sale-type-option sale-type-option--normal">
                  <input type="radio" name="saleType" value="normal" id="saleTypeNormal" onchange="updateProfitCalculator()">
                  <div class="sale-type-card">
                    <div class="sale-type-title">üè™ Norm√°l</div>
                    <div class="sale-type-subtitle">-7.5% ad√≥</div>
                  </div>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="editSalePrice">üíµ Elad√°si √°r</label>
              <div class="price-input-container">
                <input type="text" id="editSalePrice" placeholder="0" maxlength="15" oninput="formatInputPrice(this); updateProfitCalculator();">
              </div>
              <div class="price-hint">√çrd be az √°rat, automatikusan form√°z√≥dik</div>
            </div>

            <div class="profit-calc" id="profitCalc">
              <div class="profit-header">üìä Profit sz√°m√≠t√°s</div>
              <div class="profit-row">
                <span>V√©teli√°r:</span>
                <span id="calcPurchase">0 $</span>
              </div>
              <div class="profit-row">
                <span>Elad√°si √°r:</span>
                <span id="calcSale">0 $</span>
              </div>
              <div class="profit-row" id="taxLabel" style="display: none;">
                <span>Ad√≥ (7.5%):</span>
                <span id="calcTax">0 $</span>
              </div>
              <div class="profit-row" id="netSaleLabel" style="display: none;">
                <span>Nett√≥ √°r:</span>
                <span id="calcNetSale">0 $</span>
              </div>
              <div class="profit-row total">
                <span>Eredm√©ny:</span>
                <span id="calcProfit">0 $</span>
              </div>
            </div>
          </div>
        </div>

        <div class="edit-modal-footer">
          <button class="btn-cancel" onclick="closeEditModal()">‚ùå M√©gse</button>
          <button class="btn-confirm-sale" onclick="confirmSaleWithEdit()">‚úÖ Aut√≥ eladva</button>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer id="siteFooter" class="site-footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <div class="footer-logo-mark" aria-hidden="true">
          <img src="https://i.imgur.com/wEi6GRD.png" alt="JM" class="footer-logo-mark">
        </div>
        <div class="footer-brand-text">
          <div class="footer-title">JIMENEZ MOTORS INC.</div>
          <div class="footer-subtitle">Aut√≥keresked√©s & Transport</div>
        </div>
        <p class="footer-description"></p>
      </div>

      <div class="footer-links">
        <h4>Navig√°ci√≥</h4>
        <ul class="footer-link-list">
          <li><a href="#autokPage" class="footer-link" onclick="showPage('autok'); return false;">H√≠rek</a></li>
          <li class="footer-link-protected"><a href="#eladottAutokPage" class="footer-link" onclick="showPage('eladottAutok'); return false;">Elad√°sok</a></li>
          <li><a href="#tagokPage" class="footer-link" onclick="showPage('tagok'); return false;">Csapat</a></li>
          <li class="footer-link-protected"><a href="#statisztikaPage" class="footer-link" onclick="showPage('statisztika'); return false;">Statisztika</a></li>
          <li class="footer-link-protected"><a href="#autokKepekPage" class="footer-link" onclick="showPage('autokKepek'); return false;">Gal√©ria</a></li>
          <li class="footer-link-protected"><a href="#tuningokPage" class="footer-link" onclick="showPage('tuningok'); return false;">Tuning</a></li>
        </ul>
      </div>

      <div class="footer-contact">
        <h4>Kapcsolat</h4>
        <ul class="footer-contact-list">
          <li><span class="footer-link">‚òéÔ∏è 112 879 248</span></li>
          <li><span class="footer-link">‚òéÔ∏è 114 995 465</span></li>
          <li>üìç San Fierro</li>
        </ul>
      </div>

      <div class="footer-community">
        <h4>K√∂z√∂ss√©g</h4>
        <p class="footer-description">Csatlakozz a legfrissebb akci√≥k√©rt.</p>
        <div class="footer-social">
          <a class="footer-social-btn" href="https://discord.gg/dTTbgP2Xv5" target="_blank" rel="noopener">
            <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord" width="24" height="24">
          </a>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <span>¬© <span id="footerYear"></span> Jimenez Motors ‚Äî Minden jog fenntartva</span>
    </div>
  </footer>

  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/main.js"></script>
  <script src="js/cars.js"></script>
  <script src="js/soldcars.js"></script>
  <script src="js/gallery.js"></script>
  <script src="js/members.js"></script>
  <script src="js/tuning.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/modals.js"></script>
  <script src="js/tagadmin.js"></script>
</body>
</html>
